name: Publish Rust SDK documentation on GitHub Pages

on:
  workflow_dispatch:
    inputs:
      name:
        description: 'Manually triggered'

env:
  CARGO_TERM_COLOR: always

jobs:
  build-docs:
    name: Build documentation
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/ledgerhq/ledger-app-builder/ledger-app-dev-tools:latest
    steps:
      - name: Clone
        uses: actions/checkout@v4
      - name: Cargo doc
        run: |
          cargo doc -p ledger_device_sdk --no-deps --lib --target flex